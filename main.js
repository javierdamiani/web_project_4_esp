!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var r=document.querySelector("#cardTemplate"),o=function(){function e(t,r){var o,i,u,a=this,c=t.data,l=t.handleCardClick,s=t.handleDeleteClick,f=t.handleLikeAdd,p=t.handleLikeDelete,y=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,u=function(e){return a._likesArray=e,a._likesArray},(i=n(i="updateLikes"))in o?Object.defineProperty(o,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[i]=u,this._name=c.name,this._link=c.link,this._template=r,this._id=c._id,this._likesArray=c.likes,this._cardLikes=this._likesArray.length,this._ownerId=c.owner._id,this._user=y,this._handleCardClick=l,this._handleDeleteClick=s,this._handleLikeAdd=f,this._handleLikeDelete=p,this._element=this._getTemplate(),this._heartButton=this._element.querySelector("#likeBtn"),this._heartNumber=this._element.querySelector("#heartCounter"),this._cardImage=this._element.querySelector("#cardImg"),this._cardTitle=this._element.querySelector("#cardTitle")}var o,i;return o=e,(i=[{key:"_getTemplate",value:function(){return r.cloneNode(!0).content.querySelector("#cities")}},{key:"addHeart",value:function(){this._heartButton.classList.add("elements__template_element-button_active"),this._heartNumber.textContent=this._likesArray.length}},{key:"removeHeart",value:function(){this._heartButton.classList.remove("elements__template_element-button_active"),this._heartNumber.textContent=this._likesArray.length,0===this._cardLikes&&(this._heartNumber.textContent="")}},{key:"_deleteButton",value:function(){this._element.querySelector("#trashCan").closest(".elements__template_element").remove()}},{key:"_setEventListeners",value:function(){var e=this;this._heartButton.addEventListener("click",(function(){e._likesArray.some((function(t){return t._id===e._user}))?e._handleLikeDelete({id:e._id}):e._handleLikeAdd({id:e._id})})),this._element.querySelector("#trashCan").addEventListener("click",(function(){e._handleDeleteClick({id:e._id})})),this._cardImage.addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})})),this._ownerId!==this._user&&this._element.querySelector("#trashCan").remove()}},{key:"generateCard",value:function(){var e=this;this._setEventListeners(),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.setAttribute("alt",this._name),this._heartNumber.textContent=this._cardLikes?this._cardLikes:"";var t=this._likesArray.some((function(t){return t._id===e._user}));return this._heartButton.classList.toggle("elements__template_element-button_active",t),this._element}}])&&t(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),e}(),i=document.querySelector("#profName"),u=document.querySelector("#profAbout"),a=document.querySelector("#popupName"),c=document.querySelector("#popupAbout"),l=document.querySelector("#editButton"),s=document.querySelector(".popup__button_type_edit"),f=document.querySelector(".profile__avatar"),p=document.querySelector(".profile__avatar-overlay"),y=document.querySelector("#editImageForm"),m=document.querySelector("#addImg"),d=(document.querySelector("#title"),document.querySelector("#linkImg"),document.querySelector(".popup__form")),h=document.querySelector("#placeForm"),v=document.querySelector("#btnCreate"),b=document.querySelector("#btnImageEdit"),_=document.querySelector("#btnDelete"),g={formSelector:".popup__form",inputSelector:".popup__input ",submitButtonSelector:".popup__button",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__error",errorClass:"popup__error_visible"};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function E(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===S(t)?t:String(t)}var L=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),E(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),E(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners()})),this._formElement=t,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this.errorClass),e.classList.add(this.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._setButtonState(!0,this._inactiveButtonClass):this._setButtonState(!1,this._inactiveButtonClass)}},{key:"_setButtonState",value:function(e,t){this._buttonElement.disabled=e,e?this._buttonElement.classList.add(t):this._buttonElement.classList.remove(t)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t),t.value=""}))}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var j=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"addCards",value:function(e){this._container.append(e)}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popUpElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popUpElement.classList.add("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popUpElement.classList.remove("popup__opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_clickOutside",value:function(e){return e.target.classList.contains("popup")||e.target.classList.contains("popup__close")||e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup__img-close")||e.target.classList.contains("popup__img")}},{key:"setEventListeners",value:function(){var e=this;this._popUpElement.addEventListener("click",(function(t){e._clickOutside(t)&&e.close()}))}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._inputList=r._popUpElement.querySelectorAll(".popup__input"),r._formElement=r._popUpElement.querySelector(".popup__form"),r._submitButton=n,r._handleFormSubmit=t,r}return t=u,(n=[{key:"close",value:function(){B(A(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),console.log(this._formValues),this._formValues}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Guardando...":""}},{key:"setEventListeners",value:function(){var e=this;B(A(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues())}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(I);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},V.apply(this,arguments)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._title=t._popUpElement.querySelector(".popup__img-title"),t._image=t._popUpElement.querySelector(".popup__img-background"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;V(F(u.prototype),"open",this).call(this),this._title.textContent=t,this._image.src=n,this._image.setAttribute("alt",t)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(I);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}var z=function(){function e(t){var n=t.userName,r=t.userJob,o=t.userAvatar,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userJob=r,this._userId=i,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._userName.textContent,userJob:this._userJob.textContent}}},{key:"setUserInfo",value:function(e){e.userName,e.userJob,this._userName.textContent=e.userName,this._userJob.textContent=e.userJob}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===K(o)?o:String(o)),r)}var o}var W=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){if(!e.ok)throw new Error("Error: ".concat(e.status));return e.json()}},{key:"_makeRequest",value:function(e,t,n){var r=this;return fetch(t,{method:e,headers:this._headers,body:n?JSON.stringify(n):void 0}).then((function(e){return r._handleResponse(e)}))}},{key:"getCardList",value:function(){return this._makeRequest("GET","".concat(this._baseUrl,"/cards"))}},{key:"getUserInfo",value:function(){return this._makeRequest("GET","".concat(this._baseUrl,"/users/me"))}},{key:"handleEditProfile",value:function(e){var t=e.name,n=e.about;return this._makeRequest("PATCH","".concat(this._baseUrl,"/users/me"),{name:t,about:n})}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._makeRequest("POST","".concat(this._baseUrl,"/cards"),{name:t,link:n})}},{key:"removeCard",value:function(e){return this._makeRequest("DELETE","".concat(this._baseUrl,"/cards/").concat(e))}},{key:"setUserAvatar",value:function(e){return this._makeRequest("PATCH","".concat(this._baseUrl,"/users/me/avatar"),{avatar:e})}},{key:"addLike",value:function(e){return this._makeRequest("PUT","".concat(this._baseUrl,"/cards/likes/").concat(e))}},{key:"removeLike",value:function(e){return this._makeRequest("DELETE","".concat(this._baseUrl,"/cards/likes/").concat(e))}}])&&Q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===X(o)?o:String(o)),r)}var o}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Z.apply(this,arguments)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(r);if(o){var n=ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popUpSelector,r=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._submitButton=o,t}return t=u,(n=[{key:"close",value:function(){Z(ee(u.prototype),"close",this).call(this),this.renderLoading(!1)}},{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Borrando...":"Sí"}},{key:"setEventListeners",value:function(){var e=this;Z(ee(u.prototype),"setEventListeners",this).call(this),this._popUpElement.querySelector(".popup__button").addEventListener("click",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit()}))}}])&&Y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(I),ne=new W({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_03",headers:{authorization:"278fd53d-b84a-49c6-aef1-178b52806850","Content-Type":"application/json"}}),re=new L(d,g),oe=new L(h,g),ie=new L(y,g);re.enableValidation(),oe.enableValidation(),ie.enableValidation();var ue=new H("#modalPopUp");ue.setEventListeners();var ae=new x(".popup_type_profile",(function(e){ne.handleEditProfile(e).then((function(e){ne.getUserInfo().then((function(e){console.log(e),ce.setUserInfo({userName:e.name,userJob:e.about})})),ae.close()})).catch((function(e){return console.log(e)}))}),s);ae.setEventListeners();var ce=new z({userName:i,userJob:u,userAvatar:f});l.addEventListener("click",(function(){ae.open(),re.resetValidation();var e=ce.getUserInfo();a.value=e.userName,c.value=e.userJob})),ne.getUserInfo().then((function(e){ce.setUserInfo({userName:e.name,userJob:e.about}),ce.setUserAvatar(e.avatar),ce.userId=e._id})).then((function(){ne.getCardList().then((function(e){var t=new j({data:e,renderer:function(e){var n=fe(e);t.addCards(n)}},".elements");t.renderer();var n=new x(".popup_type_card",(function(e){ne.addCard({name:e.title,link:e["image-link"]}).then((function(e){var r=fe(e);t.addItem(r),n.close()})).catch((function(e){return console.log(e)}))}),v);n.setEventListeners(),m.addEventListener("click",(function(){n.open(),oe.resetValidation()}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}));var le=new x(".popup_image_profile",(function(e){var t=e["image-link"];ne.setUserAvatar(t).then((function(){ce.setUserAvatar(t),le.close()})).catch((function(e){return console.log(e)}))}),b);le.setEventListeners(),p.addEventListener("click",(function(){le.open(),ie.resetValidation()}));var se=new te({popUpSelector:"#deleteCard",submitButton:_});function fe(e){var t=new o({data:e,handleCardClick:function(e){var t=e.name,n=e.link;ue.open({name:t,link:n})},handleDeleteClick:function(e){var n=e.id;se.open(),se.setSubmitAction((function(){ne.removeCard(n).then((function(){se.close(),t._deleteButton()})).catch((function(e){return console.log(e)}))}))},handleLikeAdd:function(e){var n=e.id;ne.addLike(n).then((function(e){t.updateLikes(e.likes),t.addHeart()})).catch((function(e){return console.log(e)}))},handleLikeDelete:function(e){var n=e.id;ne.removeLike(n).then((function(e){t.updateLikes(e.likes),t.removeHeart()})).catch((function(e){return console.log(e)}))},userId:ce.userId},"#cardTemplate");return t.generateCard()}se.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMnNCQUFBLElBQU1BLEVBQVdDLFNBQVNDLGNBQWMsaUJBRTNCQyxFQUFJLFdBQ2YsU0FBQUEsRUFBQUMsRUFTRUosR0FDQSxJLE1BQUFLLEVBQUEsS0FSRUMsRUFBSUYsRUFBSkUsS0FDQUMsRUFBZUgsRUFBZkcsZ0JBQ0FDLEVBQWlCSixFQUFqQkksa0JBQ0FDLEVBQWFMLEVBQWJLLGNBQ0FDLEVBQWdCTixFQUFoQk0saUJBQ0FDLEVBQU1QLEVBQU5PLFEsNEZBQU1DLENBQUEsS0FBQVQsRyxFQUFBLEssRUFxREksU0FBQ1UsR0FFYixPQURBUixFQUFLUyxZQUFjRCxFQUNaUixFQUFLUyxXQUNkLEcsTUF4RFUsa0Isd0ZBSVJDLEtBQUtDLE1BQVFWLEVBQUtXLEtBQ2xCRixLQUFLRyxNQUFRWixFQUFLYSxLQUNsQkosS0FBS0ssVUFBWXBCLEVBQ2pCZSxLQUFLTSxJQUFNZixFQUFLZSxJQUNoQk4sS0FBS0QsWUFBY1IsRUFBS2dCLE1BQ3hCUCxLQUFLUSxXQUFhUixLQUFLRCxZQUFZVSxPQUNuQ1QsS0FBS1UsU0FBV25CLEVBQUtvQixNQUFNTCxJQUMzQk4sS0FBS1ksTUFBUWhCLEVBQ2JJLEtBQUthLGlCQUFtQnJCLEVBQ3hCUSxLQUFLYyxtQkFBcUJyQixFQUMxQk8sS0FBS2UsZUFBaUJyQixFQUN0Qk0sS0FBS2dCLGtCQUFvQnJCLEVBRXpCSyxLQUFLaUIsU0FBV2pCLEtBQUtrQixlQUVyQmxCLEtBQUttQixhQUFlbkIsS0FBS2lCLFNBQVM5QixjQUFjLFlBQ2hEYSxLQUFLb0IsYUFBZXBCLEtBQUtpQixTQUFTOUIsY0FBYyxpQkFDaERhLEtBQUtxQixXQUFhckIsS0FBS2lCLFNBQVM5QixjQUFjLFlBQzlDYSxLQUFLc0IsV0FBYXRCLEtBQUtpQixTQUFTOUIsY0FBYyxhQUNoRCxDLFFBOEVDLE8sRUE5RUFDLEcsRUFBQSxFQUFBbUMsSUFBQSxlQUFBQyxNQUVELFdBSUUsT0FIcUJ2QyxFQUNsQndDLFdBQVUsR0FDVkMsUUFBUXZDLGNBQWMsVUFFM0IsR0FFQSxDQUFBb0MsSUFBQSxXQUFBQyxNQUNBLFdBQ0V4QixLQUFLbUIsYUFBYVEsVUFBVUMsSUFBSSw0Q0FDaEM1QixLQUFLb0IsYUFBYVMsWUFBYzdCLEtBQUtELFlBQVlVLE1BQ25ELEdBQUMsQ0FBQWMsSUFBQSxjQUFBQyxNQUVELFdBQ0V4QixLQUFLbUIsYUFBYVEsVUFBVUcsT0FDMUIsNENBRUY5QixLQUFLb0IsYUFBYVMsWUFBYzdCLEtBQUtELFlBQVlVLE9BQ3pCLElBQXBCVCxLQUFLUSxhQUNQUixLQUFLb0IsYUFBYVMsWUFBYyxHQUVwQyxHQUFDLENBQUFOLElBQUEsZ0JBQUFDLE1BRUQsV0FDbUJ4QixLQUFLaUIsU0FBUzlCLGNBQWMsYUFDcEM0QyxRQUFRLCtCQUErQkQsUUFDbEQsR0FBQyxDQUFBUCxJQUFBLHFCQUFBQyxNQU9ELFdBQXFCLElBQUFRLEVBQUEsS0FDbkJoQyxLQUFLbUIsYUFBYWMsaUJBQWlCLFNBQVMsV0FDckJELEVBQUtqQyxZQUFZbUMsTUFDcEMsU0FBQ0MsR0FBSSxPQUFLQSxFQUFLN0IsTUFBUTBCLEVBQUtwQixLQUFLLElBR2pDb0IsRUFBS2hCLGtCQUFrQixDQUFFb0IsR0FBSUosRUFBSzFCLE1BRWxDMEIsRUFBS2pCLGVBQWUsQ0FBRXFCLEdBQUlKLEVBQUsxQixLQUVuQyxJQUVBTixLQUFLaUIsU0FBUzlCLGNBQWMsYUFBYThDLGlCQUFpQixTQUFTLFdBQ2pFRCxFQUFLbEIsbUJBQW1CLENBQUVzQixHQUFJSixFQUFLMUIsS0FDckMsSUFFQU4sS0FBS3FCLFdBQVdZLGlCQUFpQixTQUFTLFdBQ3hDRCxFQUFLbkIsaUJBQWlCLENBQUVYLEtBQU04QixFQUFLL0IsTUFBT0csS0FBTTRCLEVBQUs3QixPQUN2RCxJQUVJSCxLQUFLVSxXQUFhVixLQUFLWSxPQUN6QlosS0FBS2lCLFNBQVM5QixjQUFjLGFBQWEyQyxRQUU3QyxHQUFDLENBQUFQLElBQUEsZUFBQUMsTUFFRCxXQUFlLElBQUFhLEVBQUEsS0FDYnJDLEtBQUtzQyxxQkFFTHRDLEtBQUtzQixXQUFXTyxZQUFjN0IsS0FBS0MsTUFDbkNELEtBQUtxQixXQUFXa0IsSUFBTXZDLEtBQUtHLE1BQzNCSCxLQUFLcUIsV0FBV21CLGFBQWEsTUFBT3hDLEtBQUtDLE9BRXpDRCxLQUFLb0IsYUFBYVMsWUFBYzdCLEtBQUtRLFdBQWFSLEtBQUtRLFdBQWEsR0FFcEUsSUFBTWlDLEVBQWV6QyxLQUFLRCxZQUFZbUMsTUFDcEMsU0FBQ0MsR0FBSSxPQUFLQSxFQUFLN0IsTUFBUStCLEVBQUt6QixLQUFLLElBT25DLE9BTEFaLEtBQUttQixhQUFhUSxVQUFVZSxPQUMxQiwyQ0FDQUQsR0FHS3pDLEtBQUtpQixRQUNkLE0sb0VBQUM3QixDQUFBLENBN0djLEdDREp1RCxFQUFlekQsU0FBU0MsY0FBYyxhQUN0Q3lELEVBQW9CMUQsU0FBU0MsY0FBYyxjQUMzQzBELEVBQWdCM0QsU0FBU0MsY0FBYyxjQUN2QzJELEVBQWlCNUQsU0FBU0MsY0FBYyxlQUN4QzRELEVBQVU3RCxTQUFTQyxjQUFjLGVBQ2pDNkQsRUFBZTlELFNBQVNDLGNBQWMsNEJBQ3RDOEQsRUFBZS9ELFNBQVNDLGNBQWMsb0JBQ3RDK0QsRUFBc0JoRSxTQUFTQyxjQUFjLDRCQUM3Q2dFLEVBQW1CakUsU0FBU0MsY0FBYyxrQkFDMUNpRSxFQUFTbEUsU0FBU0MsY0FBYyxXQUdoQ2tFLEdBRlduRSxTQUFTQyxjQUFjLFVBQ3pCRCxTQUFTQyxjQUFjLFlBQ2xCRCxTQUFTQyxjQUFjLGlCQUNyQ21FLEVBQW1CcEUsU0FBU0MsY0FBYyxjQUMxQ29FLEVBQWdCckUsU0FBU0MsY0FBYyxjQUN2Q3FFLEVBQWN0RSxTQUFTQyxjQUFjLGlCQUNyQ3NFLEVBQVl2RSxTQUFTQyxjQUFjLGNBQ25DdUUsRUFBWSxDQUNyQkMsYUFBYyxlQUNkQyxjQUFlLGlCQUNmQyxxQkFBc0IsaUJBQ3RCQyxvQkFBcUIsa0JBQ3JCQyxnQkFBaUIsZUFDakJDLFdBQVksd0IsbXpCQ3hCS0MsRUFBYSxXQUNoQyxTQUFBQSxFQUFZWixFQUFhSyxHQUFXLElBQUFwRSxFQUFBLE0sNEZBQUFPLENBQUEsS0FBQW9FLEdBQUFDLEVBQUEseUJBcUNqQixTQUFDQyxHQUFTLE9BQzNCQSxFQUFVakMsTUFBSyxTQUFDa0MsR0FBSyxPQUFNQSxFQUFNQyxTQUFTQyxLQUFLLEdBQUMsSUFBQUosRUFBQSwyQkE0QjdCLFdBQ25CNUUsRUFBS2lGLFdBQVdDLFNBQVEsU0FBQ0osR0FDdkJBLEVBQU1uQyxpQkFBaUIsU0FBUyxXQUM5QjNDLEVBQUttRixvQkFBb0JMLEdBQ3pCOUUsRUFBS29GLG9CQUNQLEdBQ0YsR0FDRixJQUFDUixFQUFBLHlCQUVrQixXQUNqQjVFLEVBQUtxRixhQUFhMUMsaUJBQWlCLFVBQVUsU0FBQzJDLEdBQzVDQSxFQUFJQyxnQkFDTixJQUNBdkYsRUFBS2dELG9CQUNQLElBL0VFdEMsS0FBSzJFLGFBQWV0QixFQUNwQnJELEtBQUs4RSxlQUFpQnBCLEVBQVVFLGNBQ2hDNUQsS0FBSytFLHNCQUF3QnJCLEVBQVVHLHFCQUN2QzdELEtBQUtnRixxQkFBdUJ0QixFQUFVSSxvQkFDdEM5RCxLQUFLaUYsaUJBQW1CdkIsRUFBVUssZ0JBQ2xDL0QsS0FBS2tGLFlBQWN4QixFQUFVTSxXQUM3QmhFLEtBQUt1RSxXQUFhWSxNQUFNQyxLQUN0QnBGLEtBQUsyRSxhQUFhVSxpQkFBaUJyRixLQUFLOEUsaUJBRTFDOUUsS0FBS3NGLGVBQWlCdEYsS0FBSzJFLGFBQWF4RixjQUN0Q2EsS0FBSytFLHNCQUVULEMsUUFtREMsTyxFQW5EQWQsRyxFQUFBLEVBQUExQyxJQUFBLGtCQUFBQyxNQUVELFNBQWdCK0QsR0FDZCxJQUFNQyxFQUFleEYsS0FBSzJFLGFBQWF4RixjQUFjLElBQURzRyxPQUFLRixFQUFhbkQsR0FBRSxXQUN4RW9ELEVBQWEzRCxZQUFjMEQsRUFBYUcsa0JBQ3hDRixFQUFhN0QsVUFBVUMsSUFBSTVCLEtBQUtnRSxZQUNoQ3VCLEVBQWE1RCxVQUFVQyxJQUFJNUIsS0FBSytELGdCQUNwQyxHQUFDLENBQUF4QyxJQUFBLGtCQUFBQyxNQUVELFNBQWdCK0QsR0FDWixJQUFNQyxFQUFleEYsS0FBSzJFLGFBQWF4RixjQUFjLElBQURzRyxPQUFLRixFQUFhbkQsR0FBRSxXQUN4RW1ELEVBQWE1RCxVQUFVRyxPQUFPOUIsS0FBSytELGlCQUNuQ3lCLEVBQWE3RCxVQUFVRyxPQUFPOUIsS0FBS2dFLFlBQ25Dd0IsRUFBYTNELFlBQWMsRUFDL0IsR0FBQyxDQUFBTixJQUFBLHNCQUFBQyxNQUVDLFNBQW9CNEMsR0FDYkEsRUFBTUMsU0FBU0MsTUFHbEJ0RSxLQUFLMkYsZ0JBQWdCdkIsR0FGckJwRSxLQUFLNEYsZ0JBQWdCeEIsRUFBT0EsRUFBTXNCLGtCQUl0QyxHQUFDLENBQUFuRSxJQUFBLHFCQUFBQyxNQU1ELFdBQ014QixLQUFLNkYsaUJBQWlCN0YsS0FBS3VFLFlBQzdCdkUsS0FBSzhGLGlCQUFnQixFQUFNOUYsS0FBS2dGLHNCQUVoQ2hGLEtBQUs4RixpQkFBZ0IsRUFBTzlGLEtBQUtnRixxQkFFckMsR0FBQyxDQUFBekQsSUFBQSxrQkFBQUMsTUFFRCxTQUFnQnVFLEVBQVVDLEdBQ3hCaEcsS0FBS3NGLGVBQWVTLFNBQVdBLEVBQzNCQSxFQUNGL0YsS0FBS3NGLGVBQWUzRCxVQUFVQyxJQUFJb0UsR0FFbENoRyxLQUFLc0YsZUFBZTNELFVBQVVHLE9BQU9rRSxFQUV6QyxHQUFDLENBQUF6RSxJQUFBLGtCQUFBQyxNQUVELFdBQWtCLElBQUFRLEVBQUEsS0FDaEJoQyxLQUFLMEUscUJBQ0wxRSxLQUFLdUUsV0FBV0MsU0FBUSxTQUFDSixHQUN2QnBDLEVBQUsyRCxnQkFBZ0J2QixHQUNyQkEsRUFBTTVDLE1BQVEsRUFDaEIsR0FDRixNLG9FQUFDeUMsQ0FBQSxDQWpFK0IsRyx1cUJDQWJnQyxFQUFPLFdBQ3hCLFNBQUFBLEVBQUE1RyxFQUE4QjZHLEdBQWtCLElBQW5DM0csRUFBSUYsRUFBSkUsS0FBTTRHLEVBQVE5RyxFQUFSOEcsVSw0RkFBUXRHLENBQUEsS0FBQW9HLEdBQ3ZCakcsS0FBS29HLGVBQWlCN0csRUFDdEJTLEtBQUtxRyxVQUFZRixFQUNqQm5HLEtBQUtzRyxXQUFhcEgsU0FBU0MsY0FBYytHLEVBQzdDLEMsUUFhQyxPLEVBYkFELEcsRUFBQSxFQUFBMUUsSUFBQSxXQUFBQyxNQUNELFdBQVUsSUFBQWxDLEVBQUEsS0FDTlUsS0FBS29HLGVBQWU1QixTQUFRLFNBQUErQixHQUN4QmpILEVBQUsrRyxVQUFVRSxFQUNuQixHQUNKLEdBQUMsQ0FBQWhGLElBQUEsVUFBQUMsTUFFRCxTQUFRZ0YsR0FDSnhHLEtBQUtzRyxXQUFXRyxRQUFRRCxFQUM1QixHQUFDLENBQUFqRixJQUFBLFdBQUFDLE1BRUQsU0FBU2dGLEdBQ0x4RyxLQUFLc0csV0FBV0ksT0FBT0YsRUFDM0IsTSxvRUFBQ1AsQ0FBQSxDQWxCdUIsRyx1cUJDQVBVLEVBQUssV0FDdEIsU0FBQUEsRUFBWUMsSSw0RkFBYy9HLENBQUEsS0FBQThHLEdBQ3RCM0csS0FBSzZHLGNBQWdCM0gsU0FBU0MsY0FBY3lILEdBQzVDNUcsS0FBSzhHLGdCQUFrQjlHLEtBQUs4RyxnQkFBZ0JDLEtBQUsvRyxLQUNyRCxDLFFBa0NDLE8sRUFsQ0EyRyxHLEVBQUEsRUFBQXBGLElBQUEsT0FBQUMsTUFFRCxXQUNJeEIsS0FBSzZHLGNBQWNsRixVQUFVQyxJQUFJLGlCQUNqQzFDLFNBQVMrQyxpQkFBaUIsVUFBV2pDLEtBQUs4RyxnQkFDOUMsR0FBQyxDQUFBdkYsSUFBQSxRQUFBQyxNQUVELFdBQ0l4QixLQUFLNkcsY0FBY2xGLFVBQVVHLE9BQU8saUJBQ3BDNUMsU0FBUzhILG9CQUFvQixVQUFXaEgsS0FBSzhHLGdCQUNqRCxHQUFDLENBQUF2RixJQUFBLGtCQUFBQyxNQUVELFNBQWdCb0QsR0FDRyxXQUFaQSxFQUFJckQsS0FDSHZCLEtBQUtpSCxPQUViLEdBQUMsQ0FBQTFGLElBQUEsZ0JBQUFDLE1BRUQsU0FBY29ELEdBQ1YsT0FDSUEsRUFBSXNDLE9BQU92RixVQUFVd0YsU0FBUyxVQUM5QnZDLEVBQUlzQyxPQUFPdkYsVUFBVXdGLFNBQVMsaUJBQzlCdkMsRUFBSXNDLE9BQU92RixVQUFVd0YsU0FBUyx3QkFDOUJ2QyxFQUFJc0MsT0FBT3ZGLFVBQVV3RixTQUFTLHFCQUM5QnZDLEVBQUlzQyxPQUFPdkYsVUFBVXdGLFNBQVMsYUFFdEMsR0FBQyxDQUFBNUYsSUFBQSxvQkFBQUMsTUFFRCxXQUFtQixJQUFBbEMsRUFBQSxLQUNmVSxLQUFLNkcsY0FBYzVFLGlCQUFpQixTQUFTLFNBQUMyQyxHQUN2Q3RGLEVBQUs4SCxjQUFjeEMsSUFDbEJ0RixFQUFLMkgsT0FFYixHQUNKLE0sb0VBQUNOLENBQUEsQ0F0Q3FCLEcsZ3ZDQ0FLLElBRVZVLEVBQWEsU0FBQUMsSSxxUkFBQUMsQ0FBQUYsRUFBQUMsR0FBQSxJLFFBQUFFLEcsRUFBQUgsRSxxckJBQzlCLFNBQUFBLEVBQVlULEVBQWVhLEVBQWtCQyxHQUFhLElBQUFwSSxFQUtiLE8sNEZBTGFPLENBQUEsS0FBQXdILElBQ3REL0gsRUFBQWtJLEVBQUFHLEtBQUEsS0FBTWYsSUFDRHJDLFdBQWFqRixFQUFLdUgsY0FBY3hCLGlCQUFpQixpQkFDdEQvRixFQUFLcUYsYUFBZXJGLEVBQUt1SCxjQUFjMUgsY0FBYyxnQkFDckRHLEVBQUtzSSxjQUFnQkYsRUFDckJwSSxFQUFLdUksa0JBQW9CSixFQUFnQm5JLENBQzdDLENBK0JDLE8sRUEvQkErSCxHLEVBQUEsRUFBQTlGLElBQUEsUUFBQUMsTUFFRCxXQUNJc0csRUFBQUMsRUFBQVYsRUFBQVcsV0FBQSxjQUFBTCxLQUFBLE1BQ0EzSCxLQUFLMkUsYUFBYXNELE9BQ3RCLEdBQUMsQ0FBQTFHLElBQUEsa0JBQUFDLE1BRUQsV0FBaUIsSUFBQVEsRUFBQSxLQU1YLE9BTEZoQyxLQUFLa0ksWUFBYSxDQUFDLEVBQ25CbEksS0FBS3VFLFdBQVdDLFNBQVEsU0FBQ0osR0FDckJwQyxFQUFLa0csWUFBWTlELEVBQU1sRSxNQUFRa0UsRUFBTTVDLEtBQ3ZDLElBQ0EyRyxRQUFRQyxJQUFJcEksS0FBS2tJLGFBQ1ZsSSxLQUFLa0ksV0FDbEIsR0FBQyxDQUFBM0csSUFBQSxnQkFBQUMsTUFFRCxTQUFjNkcsR0FFTnJJLEtBQUs0SCxjQUFjL0YsWUFEbkJ3RyxFQUNpQyxlQUVBLEVBRXpDLEdBQUMsQ0FBQTlHLElBQUEsb0JBQUFDLE1BRUQsV0FBbUIsSUFBQWEsRUFBQSxLQUNmeUYsRUFBQUMsRUFBQVYsRUFBQVcsV0FBQSwwQkFBQUwsS0FBQSxNQUNBM0gsS0FBSzJFLGFBQWExQyxpQkFBaUIsVUFBVSxTQUFDMkMsR0FDMUNBLEVBQUlDLGlCQUNKeEMsRUFBS2lHLGVBQWMsR0FDbkJqRyxFQUFLd0Ysa0JBQWtCeEYsRUFBS2tHLGtCQUM5QixHQUNOLE0sb0VBQUNsQixDQUFBLENBdEM2QixDQUFTVixHLGd2Q0NEWixJQUVWNkIsRUFBYyxTQUFBbEIsSSxxUkFBQUMsQ0FBQWlCLEVBQUFsQixHQUFBLEksUUFBQUUsRyxFQUFBZ0IsRSxxckJBQy9CLFNBQUFBLEVBQVk1QixHQUFjLElBQUF0SCxFQUdrRCxPLDRGQUhsRE8sQ0FBQSxLQUFBMkksSUFDdEJsSixFQUFBa0ksRUFBQUcsS0FBQSxLQUFNZixJQUNENkIsT0FBU25KLEVBQUt1SCxjQUFjMUgsY0FBYyxxQkFDL0NHLEVBQUtvSixPQUFTcEosRUFBS3VILGNBQWMxSCxjQUFjLDBCQUF5QkcsQ0FDNUUsQ0FNQyxPLEVBTkFrSixHLEVBQUEsRUFBQWpILElBQUEsT0FBQUMsTUFDRCxTQUFBbkMsR0FBa0IsSUFBWmEsRUFBSWIsRUFBSmEsS0FBTUUsRUFBSWYsRUFBSmUsS0FDUjBILEVBQUFDLEVBQUFTLEVBQUFSLFdBQUEsYUFBQUwsS0FBQSxNQUNBM0gsS0FBS3lJLE9BQU81RyxZQUFjM0IsRUFDMUJGLEtBQUswSSxPQUFPbkcsSUFBTW5DLEVBQ2xCSixLQUFLMEksT0FBT2xHLGFBQWEsTUFBT3RDLEVBQ3BDLE0sb0VBQUNzSSxDQUFBLENBWDhCLENBQVM3QixHLHVxQkNIdkJnQyxFQUFRLFdBQzNCLFNBQUFBLEVBQUF0SixHQUF1RCxJQUF6Q3VKLEVBQVF2SixFQUFSdUosU0FBVUMsRUFBT3hKLEVBQVB3SixRQUFTQyxFQUFVekosRUFBVnlKLFdBQVlsSixFQUFNUCxFQUFOTyxRLDRGQUFNQyxDQUFBLEtBQUE4SSxHQUNqRDNJLEtBQUsrSSxVQUFZSCxFQUNqQjVJLEtBQUtnSixTQUFXSCxFQUNoQjdJLEtBQUtpSixRQUFVckosRUFDZkksS0FBS2tKLFlBQWNKLENBQ3JCLEMsUUFpQkMsTyxFQWpCQUgsRyxFQUFBLEVBQUFwSCxJQUFBLGNBQUFDLE1BRUQsV0FDRSxNQUFPLENBQ0xvSCxTQUFVNUksS0FBSytJLFVBQVVsSCxZQUN6QmdILFFBQVM3SSxLQUFLZ0osU0FBU25ILFlBRTNCLEdBQUMsQ0FBQU4sSUFBQSxjQUFBQyxNQUVELFNBQVlqQyxHQUNrQkEsRUFBckJxSixTQUFxQnJKLEVBQVhzSixRQUNqQjdJLEtBQUsrSSxVQUFVbEgsWUFBY3RDLEVBQUtxSixTQUNsQzVJLEtBQUtnSixTQUFTbkgsWUFBY3RDLEVBQUtzSixPQUNuQyxHQUFDLENBQUF0SCxJQUFBLGdCQUFBQyxNQUVELFNBQWMySCxHQUNabkosS0FBS2tKLFlBQVkzRyxJQUFNNEcsQ0FDekIsTSxvRUFBQ1IsQ0FBQSxDQXZCMEIsRyx1cUJDQVJTLEVBQUcsV0FDdEIsU0FBQUEsRUFBQS9KLEdBQWtDLElBQXBCZ0ssRUFBT2hLLEVBQVBnSyxRQUFTQyxFQUFPakssRUFBUGlLLFMsNEZBQU96SixDQUFBLEtBQUF1SixHQUM1QnBKLEtBQUt1SixTQUFXRixFQUNoQnJKLEtBQUt3SixTQUFXRixDQUNsQixDLFFBeURDLE8sRUF6REFGLEcsRUFBQSxFQUFBN0gsSUFBQSxrQkFBQUMsTUFFRCxTQUFnQmlJLEdBQ2QsSUFBS0EsRUFBSUMsR0FDUCxNQUFNLElBQUlDLE1BQU0sVUFBRGxFLE9BQVdnRSxFQUFJRyxTQUVoQyxPQUFPSCxFQUFJSSxNQUNiLEdBQUMsQ0FBQXRJLElBQUEsZUFBQUMsTUFFRCxTQUFhc0ksRUFBUUMsRUFBS0MsR0FBTSxJQUFBMUssRUFBQSxLQUM5QixPQUFPMkssTUFBTUYsRUFBSyxDQUNoQkQsT0FBUUEsRUFDUlIsUUFBU3RKLEtBQUt3SixTQUNkUSxLQUFNQSxFQUFPRSxLQUFLQyxVQUFVSCxRQUFRSSxJQUNuQ0MsTUFBSyxTQUFDWixHQUNQLE9BQU9uSyxFQUFLZ0wsZ0JBQWdCYixFQUM5QixHQUNGLEdBQUMsQ0FBQWxJLElBQUEsY0FBQUMsTUFFRCxXQUNFLE9BQU94QixLQUFLdUssYUFBYSxNQUFPLEdBQUY5RSxPQUFLekYsS0FBS3VKLFNBQVEsVUFDbEQsR0FBQyxDQUFBaEksSUFBQSxjQUFBQyxNQUVELFdBQ0UsT0FBT3hCLEtBQUt1SyxhQUFhLE1BQU8sR0FBRjlFLE9BQUt6RixLQUFLdUosU0FBUSxhQUNsRCxHQUFDLENBQUFoSSxJQUFBLG9CQUFBQyxNQUVELFNBQUFnSixHQUFtQyxJQUFmdEssRUFBSXNLLEVBQUp0SyxLQUFNdUssRUFBS0QsRUFBTEMsTUFDeEIsT0FBT3pLLEtBQUt1SyxhQUFhLFFBQVMsR0FBRjlFLE9BQUt6RixLQUFLdUosU0FBUSxhQUFhLENBQzdEckosS0FBQUEsRUFDQXVLLE1BQUFBLEdBRUosR0FBQyxDQUFBbEosSUFBQSxVQUFBQyxNQUVELFNBQUFrSixHQUF3QixJQUFkeEssRUFBSXdLLEVBQUp4SyxLQUFNRSxFQUFJc0ssRUFBSnRLLEtBQ2QsT0FBT0osS0FBS3VLLGFBQWEsT0FBUSxHQUFGOUUsT0FBS3pGLEtBQUt1SixTQUFRLFVBQVUsQ0FBRXJKLEtBQUFBLEVBQU1FLEtBQUFBLEdBQ3JFLEdBQUMsQ0FBQW1CLElBQUEsYUFBQUMsTUFFRCxTQUFXbUosR0FDVCxPQUFPM0ssS0FBS3VLLGFBQWEsU0FBVSxHQUFGOUUsT0FBS3pGLEtBQUt1SixTQUFRLFdBQUE5RCxPQUFVa0YsR0FDL0QsR0FBQyxDQUFBcEosSUFBQSxnQkFBQUMsTUFFRCxTQUFjMkgsR0FDWixPQUFPbkosS0FBS3VLLGFBQWEsUUFBUyxHQUFGOUUsT0FBS3pGLEtBQUt1SixTQUFRLG9CQUFvQixDQUNwRUosT0FBQUEsR0FFSixHQUFDLENBQUE1SCxJQUFBLFVBQUFDLE1BRUQsU0FBUW1KLEdBQ04sT0FBTzNLLEtBQUt1SyxhQUFhLE1BQU8sR0FBRjlFLE9BQUt6RixLQUFLdUosU0FBUSxpQkFBQTlELE9BQWdCa0YsR0FDbEUsR0FBQyxDQUFBcEosSUFBQSxhQUFBQyxNQUVELFNBQVdtSixHQUNULE9BQU8zSyxLQUFLdUssYUFDVixTQUFRLEdBQUE5RSxPQUNMekYsS0FBS3VKLFNBQVEsaUJBQUE5RCxPQUFnQmtGLEdBRXBDLE0sb0VBQUN2QixDQUFBLENBN0RxQixHLG92Q0NBTSxJQUVUd0IsR0FBZ0IsU0FBQUMsSSxxUkFBQXRELENBQUFxRCxFQUFBQyxHQUFBLEksUUFBQXJELEcsRUFBQW9ELEUsdXJCQUNqQyxTQUFBQSxFQUFBdkwsR0FBNkQsSUFBQUMsRUFBaERzSCxFQUFhdkgsRUFBYnVILGNBQWVhLEVBQWdCcEksRUFBaEJvSSxpQkFBa0JDLEVBQVlySSxFQUFacUksYUFHUixPLDRGQUhvQjdILENBQUEsS0FBQStLLElBQ3REdEwsRUFBQWtJLEVBQUFHLEtBQUEsS0FBTWYsSUFDRGlCLGtCQUFvQkosRUFDekJuSSxFQUFLc0ksY0FBZ0JGLEVBQWFwSSxDQUN0QyxDQTJCQyxPLEVBM0JBc0wsRyxFQUFBLEVBQUFySixJQUFBLFFBQUFDLE1BRUQsV0FDSXNHLEVBQUFDLEdBQUE2QyxFQUFBNUMsV0FBQSxjQUFBTCxLQUFBLE1BQ0EzSCxLQUFLc0ksZUFBYyxFQUN2QixHQUFDLENBQUEvRyxJQUFBLGtCQUFBQyxNQUVELFNBQWdCc0osR0FDWjlLLEtBQUs2SCxrQkFBb0JpRCxDQUM3QixHQUFDLENBQUF2SixJQUFBLGdCQUFBQyxNQUVELFNBQWM2RyxHQUVOckksS0FBSzRILGNBQWMvRixZQURuQndHLEVBQ2lDLGNBR0EsSUFFekMsR0FBQyxDQUFBOUcsSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBUSxFQUFBLEtBQ2hCOEYsRUFBQUMsR0FBQTZDLEVBQUE1QyxXQUFBLDBCQUFBTCxLQUFBLE1BQ0EzSCxLQUFLNkcsY0FBYzFILGNBQWMsa0JBQWtCOEMsaUJBQWlCLFNBQVMsU0FBQzJDLEdBQzFFQSxFQUFJQyxpQkFDSjdDLEVBQUtzRyxlQUFjLEdBQ25CdEcsRUFBSzZGLG1CQUNULEdBQ0osTSxvRUFBQytDLENBQUEsQ0FoQ2dDLENBQVNHLEdDNkJqQ0MsR0FBTSxJQUFJNUIsRUFBSSxDQUN6QkMsUUFBUyxzREFDVEMsUUFBUyxDQUNQMkIsY0FBZSx1Q0FDZixlQUFnQixzQkFJZEMsR0FBd0IsSUFBSWpILEVBQWNaLEVBQWFLLEdBQ3ZEeUgsR0FBcUIsSUFBSWxILEVBQWNYLEVBQWtCSSxHQUN6RDBILEdBQTZCLElBQUluSCxFQUNyQ2QsRUFDQU8sR0FHRndILEdBQXNCRyxtQkFDdEJGLEdBQW1CRSxtQkFDbkJELEdBQTJCQyxtQkFFM0IsSUFBTUMsR0FBWSxJQUFJOUMsRUFBZSxlQUNyQzhDLEdBQVVDLG9CQUVWLElBQU1DLEdBQVksSUFBSW5FLEVBQ3BCLHVCQUNBLFNBQUM5SCxHQUNDeUwsR0FDR1Msa0JBQWtCbE0sR0FDbEI4SyxNQUFLLFNBQUNxQixHQUNMVixHQUFJVyxjQUFjdEIsTUFBSyxTQUFDN0ksR0FDdEIyRyxRQUFRQyxJQUFJNUcsR0FDWm9LLEdBQVlDLFlBQVksQ0FDdEJqRCxTQUFVcEgsRUFBTXRCLEtBQ2hCMkksUUFBU3JILEVBQU1pSixPQUVuQixJQUVBZSxHQUFVdkUsT0FDWixJQUNDNkUsT0FBTSxTQUFDQyxHQUFHLE9BQUs1RCxRQUFRQyxJQUFJMkQsRUFBSSxHQUNwQyxHQUNBL0ksR0FHRndJLEdBQVVELG9CQUVWLElBQU1LLEdBQWMsSUFBSWpELEVBQVMsQ0FDL0JDLFNBQVVqRyxFQUNWa0csUUFBU2pHLEVBQ1RrRyxXQUFZN0YsSUFHZEYsRUFBUWQsaUJBQWlCLFNBQVMsV0FDaEN1SixHQUFVUSxPQUNWZCxHQUFzQmUsa0JBQ3RCLElBQU1DLEVBQWtCTixHQUFZRCxjQUNwQzlJLEVBQWNyQixNQUFRMEssRUFBZ0J0RCxTQUN0QzlGLEVBQWV0QixNQUFRMEssRUFBZ0JyRCxPQUN6QyxJQUVBbUMsR0FDR1csY0FDQXRCLE1BQUssU0FBQ1osR0FDTG1DLEdBQVlDLFlBQVksQ0FBRWpELFNBQVVhLEVBQUl2SixLQUFNMkksUUFBU1ksRUFBSWdCLFFBQzNEbUIsR0FBWU8sY0FBYzFDLEVBQUlOLFFBQzlCeUMsR0FBWWhNLE9BQVM2SixFQUFJbkosR0FDM0IsSUFDQytKLE1BQUssV0FDSlcsR0FDR29CLGNBQ0EvQixNQUFLLFNBQUNaLEdBQ0wsSUFBTTRDLEVBQWUsSUFBSXBHLEVBQ3ZCLENBQ0UxRyxLQUFNa0ssRUFDTnRELFNBQVUsU0FBQ21HLEdBQ1QsSUFBTUMsRUFBY0MsR0FBV0YsR0FDL0JELEVBQWFJLFNBQVNGLEVBQ3hCLEdBRUYsYUFFRkYsRUFBYWxHLFdBRWIsSUFBTXVHLEVBQWtCLElBQUlyRixFQUMxQixvQkFDQSxTQUFDc0YsR0FDQzNCLEdBQ0c0QixRQUFRLENBQUUxTSxLQUFNeU0sRUFBU0UsTUFBT3pNLEtBQU11TSxFQUFTLGdCQUMvQ3RDLE1BQUssU0FBQ3lDLEdBQ0wsSUFBTUMsRUFBaUJQLEdBQVdNLEdBQ2xDVCxFQUFhVyxRQUFRRCxHQUNyQkwsRUFBZ0J6RixPQUNsQixJQUNDNkUsT0FBTSxTQUFDQyxHQUFHLE9BQUs1RCxRQUFRQyxJQUFJMkQsRUFBSSxHQUNwQyxHQUNBeEksR0FHRm1KLEVBQWdCbkIsb0JBRWhCbkksRUFBT25CLGlCQUFpQixTQUFTLFdBQy9CeUssRUFBZ0JWLE9BQ2hCYixHQUFtQmMsaUJBQ3JCLEdBQ0YsSUFDQ0gsT0FBTSxTQUFDQyxHQUFHLE9BQUs1RCxRQUFRQyxJQUFJMkQsRUFBSSxHQUNwQyxJQUNDRCxPQUFNLFNBQUNDLEdBQUcsT0FBSzVELFFBQVFDLElBQUkyRCxFQUFJLElBRWxDLElBQU1rQixHQUFvQixJQUFJNUYsRUFDNUIsd0JBQ0EsU0FBQzlILEdBQ0MsSUFBTTRKLEVBQVM1SixFQUFLLGNBQ3BCeUwsR0FDR21CLGNBQWNoRCxHQUNka0IsTUFBSyxXQUNKdUIsR0FBWU8sY0FBY2hELEdBQzFCOEQsR0FBa0JoRyxPQUNwQixJQUNDNkUsT0FBTSxTQUFDQyxHQUFHLE9BQUs1RCxRQUFRQyxJQUFJMkQsRUFBSSxHQUNwQyxHQUNBdkksR0FHRnlKLEdBQWtCMUIsb0JBRWxCckksRUFBb0JqQixpQkFBaUIsU0FBUyxXQUM1Q2dMLEdBQWtCakIsT0FDbEJaLEdBQTJCYSxpQkFDN0IsSUFFQSxJQUFNaUIsR0FBa0IsSUFBSXRDLEdBQWlCLENBQzNDaEUsY0FBZSxjQUNmYyxhQUFjakUsSUFLaEIsU0FBUytJLEdBQVdqTixHQUNsQixJQUFNZ04sRUFBYyxJQUFJbk4sRUFDdEIsQ0FDRUcsS0FBQUEsRUFDQUMsZ0JBQWlCLFNBQUFILEdBQW9CLElBQWpCYSxFQUFJYixFQUFKYSxLQUFNRSxFQUFJZixFQUFKZSxLQUN4QmtMLEdBQVVVLEtBQUssQ0FBRTlMLEtBQUFBLEVBQU1FLEtBQUFBLEdBQ3pCLEVBRUFYLGtCQUFtQixTQUFBK0ssR0FBWSxJQUFUcEksRUFBRW9JLEVBQUZwSSxHQUNwQjhLLEdBQWdCbEIsT0FDaEJrQixHQUFnQkMsaUJBQWdCLFdBQzlCbkMsR0FDR29DLFdBQVdoTCxHQUNYaUksTUFBSyxXQUNKNkMsR0FBZ0JqRyxRQUNoQnNGLEVBQVljLGVBQ2QsSUFDQ3ZCLE9BQU0sU0FBQ0MsR0FBRyxPQUFLNUQsUUFBUUMsSUFBSTJELEVBQUksR0FDcEMsR0FDRixFQUVBck0sY0FBZSxTQUFBZ0wsR0FBWSxJQUFUdEksRUFBRXNJLEVBQUZ0SSxHQUNoQjRJLEdBQ0dzQyxRQUFRbEwsR0FDUmlJLE1BQUssU0FBQ1osR0FDTDhDLEVBQVlnQixZQUFZOUQsRUFBSWxKLE9BQzVCZ00sRUFBWWlCLFVBQ2QsSUFDQzFCLE9BQU0sU0FBQ0MsR0FBRyxPQUFLNUQsUUFBUUMsSUFBSTJELEVBQUksR0FDcEMsRUFFQXBNLGlCQUFrQixTQUFBOE4sR0FBWSxJQUFUckwsRUFBRXFMLEVBQUZyTCxHQUNuQjRJLEdBQ0cwQyxXQUFXdEwsR0FDWGlJLE1BQUssU0FBQ1osR0FDTDhDLEVBQVlnQixZQUFZOUQsRUFBSWxKLE9BQzVCZ00sRUFBWW9CLGFBQ2QsSUFDQzdCLE9BQU0sU0FBQ0MsR0FBRyxPQUFLNUQsUUFBUUMsSUFBSTJELEVBQUksR0FDcEMsRUFFQW5NLE9BQVFnTSxHQUFZaE0sUUFFdEIsaUJBRUYsT0FBTzJNLEVBQVlxQixjQUNyQixDQWhEQVYsR0FBZ0IzQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcFVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3BVcFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wVXBEZWxldGVJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZFRlbXBsYXRlXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgICBoYW5kbGVMaWtlQWRkLFxyXG4gICAgICBoYW5kbGVMaWtlRGVsZXRlLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9saWtlc0FycmF5ID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fdXNlciA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQWRkID0gaGFuZGxlTGlrZUFkZDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VEZWxldGUgPSBoYW5kbGVMaWtlRGVsZXRlO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2hlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpa2VCdG5cIik7XHJcbiAgICB0aGlzLl9oZWFydE51bWJlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNoZWFydENvdW50ZXJcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZEltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkVGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUNhcmQgPSB0ZW1wbGF0ZVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2l0aWVzXCIpO1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlQ2FyZDtcclxuICB9XHJcblxyXG4gIC8vaGFuZGxlTGlrZUJ0blxyXG4gIGFkZEhlYXJ0KCkge1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX190ZW1wbGF0ZV9lbGVtZW50LWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9oZWFydE51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlSGVhcnQoKSB7XHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICBcImVsZW1lbnRzX190ZW1wbGF0ZV9lbGVtZW50LWJ1dHRvbl9hY3RpdmVcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2hlYXJ0TnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5fY2FyZExpa2VzID09PSAwKSB7XHJcbiAgICAgIHRoaXMuX2hlYXJ0TnVtYmVyLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9kZWxldGVCdXR0b24oKSB7XHJcbiAgICBjb25zdCB0cmFzaEJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIiN0cmFzaENhblwiKTtcclxuICAgIHRyYXNoQnRuLmNsb3Nlc3QoXCIuZWxlbWVudHNfX3RlbXBsYXRlX2VsZW1lbnRcIikucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcyA9IChyZXNBcnJheSkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZXNBcnJheSA9IHJlc0FycmF5O1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzQXJyYXk7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgY29uc3QgaGFzVXNlckxpa2VkID0gdGhpcy5fbGlrZXNBcnJheS5zb21lKFxyXG4gICAgICAgIChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlclxyXG4gICAgICApO1xyXG4gICAgICBpZiAoaGFzVXNlckxpa2VkKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZURlbGV0ZSh7IGlkOiB0aGlzLl9pZCB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQWRkKHsgaWQ6IHRoaXMuX2lkIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHJhc2hDYW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soeyBpZDogdGhpcy5faWQgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VyKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIiN0cmFzaENhblwiKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9uYW1lKTtcclxuXHJcbiAgICB0aGlzLl9oZWFydE51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmRMaWtlcyA/IHRoaXMuX2NhcmRMaWtlcyA6IFwiXCI7XHJcblxyXG4gICAgY29uc3QgaGFzVXNlckxpa2VkID0gdGhpcy5fbGlrZXNBcnJheS5zb21lKFxyXG4gICAgICAobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJcclxuICAgICk7XHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFxyXG4gICAgICBcImVsZW1lbnRzX190ZW1wbGF0ZV9lbGVtZW50LWJ1dHRvbl9hY3RpdmVcIixcclxuICAgICAgaGFzVXNlckxpa2VkXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZk5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZkFib3V0XCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBGb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBOYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBGb3JtQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwQWJvdXRcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0QnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUltYWdlT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0SW1hZ2VGb3JtXCIpXHJcbmV4cG9ydCBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZEltZ1wiKTtcclxuZXhwb3J0IGNvbnN0IG5ld1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IG5ld0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlua0ltZ1wiKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKVxyXG5leHBvcnQgY29uc3QgcGxhY2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2VGb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuQ3JlYXRlXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VTdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J0bkltYWdlRWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkRlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuRGVsZXRlXCIpO1xyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0IFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHNlbGVjdG9ycykge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZWxlY3RvcnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KXtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmlucHV0RXJyb3JDbGFzcyk7XHJcbn1cclxuXHJcbl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbn1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IFxyXG4gICAgaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG5cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX3NldEJ1dHRvblN0YXRlKHRydWUsIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2V0QnV0dG9uU3RhdGUoZmFsc2UsIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEJ1dHRvblN0YXRlKGRpc2FibGVkLCBjbGFzc1RvQWRkKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZGlzYWJsZWQ7XHJcbiAgICBpZiAoZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzVG9BZGQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzVG9BZGQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcilcclxuICAgIH1cclxuICAgIHJlbmRlcmVyKCl7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FyZHMoZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMuX3BvcFVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wVXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgb3Blbigpe1xyXG4gICAgICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICB0aGlzLl9wb3BVcEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpe1xyXG4gICAgICAgIGlmKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpeyBcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2xpY2tPdXRzaWRlKGV2dCl7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxyXG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKSB8fFxyXG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikgfHxcclxuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9faW1nLWNsb3NlXCIpIHx8XHJcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2ltZ1wiKVxyXG4gICAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX3BvcFVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT57XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2NsaWNrT3V0c2lkZShldnQpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3BVcFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCBzdWJtaXRCdXR0b24pe1xyXG4gICAgICAgIHN1cGVyKHBvcFVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdFxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpXHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCl7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9e307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5fZm9ybVZhbHVlcyk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlwiXHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiXHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wVXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3Ipe1xyXG4gICAgICAgIHN1cGVyKHBvcFVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZy10aXRsZVwiKTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWctYmFja2dyb3VuZFwiKVxyXG4gICAgfVxyXG4gICAgb3Blbih7bmFtZSwgbGlua30pe1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKVxyXG4gICAgICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBuYW1lKVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXIsIHVzZXJJZCB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gdXNlckF2YXRhclxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJKb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgY29uc3Qge3VzZXJOYW1lLCB1c2VySm9ifSA9IGRhdGFcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gZGF0YS51c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBkYXRhLnVzZXJKb2I7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICB9XHJcblxyXG4gIF9tYWtlUmVxdWVzdChtZXRob2QsIHVybCwgYm9keSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogdW5kZWZpbmVkLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkTGlzdCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIkdFVFwiLCBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2ApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCJHRVRcIiwgYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiUEFUQ0hcIiwgYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGFib3V0LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCJQT1NUXCIsIGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgeyBuYW1lLCBsaW5rIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIkRFTEVURVwiLCBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCJQQVRDSFwiLCBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIGF2YXRhcixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIlBVVFwiLCBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXHJcbiAgICAgIFwiREVMRVRFXCIsXHJcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWBcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3BVcCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3BVcERlbGV0ZUltYWdlIGV4dGVuZHMgUG9wVXAge1xyXG4gICAgY29uc3RydWN0b3Ioe3BvcFVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHN1Ym1pdEJ1dHRvbn0pIHtcclxuICAgICAgICBzdXBlcihwb3BVcFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBzdWJtaXRCdXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb25cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJCb3JyYW5kby4uLlwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlPDrVwiXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi9jb21wb25lbnRzL2luaXRpYWxDYXJkcy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHNlbGVjdG9ycyxcclxuICBlZGl0QnRuLFxyXG4gIGFkZEJ0bixcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZVByb2Zlc3Npb24sXHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVJbWFnZU92ZXJsYXksXHJcbiAgcG9wdXBGb3JtTmFtZSxcclxuICBwb3B1cEZvcm1BYm91dCxcclxuICBuZXdUaXRsZSxcclxuICBuZXdJbWcsXHJcbiAgZm9ybUVsZW1lbnQsXHJcbiAgcGxhY2VGb3JtRWxlbWVudCxcclxuICBpbWFnZUZvcm1FbGVtZW50LFxyXG4gIGJ1dHRvblN1Ym1pdCxcclxuICBhZGRDYXJkU3VibWl0LFxyXG4gIGltYWdlU3VibWl0LFxyXG4gIGJ0bkRlbGV0ZSxcclxufSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcFVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wVXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wVXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wVXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3BVcERlbGV0ZUltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcFVwRGVsZXRlSW1hZ2VcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wM1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMjc4ZmQ1M2QtYjg0YS00OWM2LWFlZjEtMTc4YjUyODA2ODUwXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3BVcFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpO1xyXG5jb25zdCBhZGRQbGFjZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihwbGFjZUZvcm1FbGVtZW50LCBzZWxlY3RvcnMpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2VQb3B1cFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGltYWdlRm9ybUVsZW1lbnQsXHJcbiAgc2VsZWN0b3JzXHJcbik7XHJcblxyXG5wcm9maWxlUG9wVXBWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRQbGFjZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wcm9maWxlSW1hZ2VQb3B1cFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBtb2RhbENhcmQgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjbW9kYWxQb3BVcFwiKTtcclxubW9kYWxDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0UG9wVXAgPSBuZXcgUG9wVXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIixcclxuICAoZGF0YSkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5oYW5kbGVFZGl0UHJvZmlsZShkYXRhKVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgICB1c2VyTmFtZTogdmFsdWUubmFtZSxcclxuICAgICAgICAgICAgdXNlckpvYjogdmFsdWUuYWJvdXQsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWRpdFBvcFVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9LFxyXG4gIGJ1dHRvblN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdFBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwcm9maWxlVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWU6IHByb2ZpbGVUaXRsZSxcclxuICB1c2VySm9iOiBwcm9maWxlUHJvZmVzc2lvbixcclxuICB1c2VyQXZhdGFyOiBwcm9maWxlSW1hZ2UsXHJcbn0pO1xyXG5cclxuZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRQb3BVcC5vcGVuKCk7XHJcbiAgcHJvZmlsZVBvcFVwVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IHByb2ZpbGVVc2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgcG9wdXBGb3JtTmFtZS52YWx1ZSA9IHByb2ZpbGVVc2VySW5mby51c2VyTmFtZTtcclxuICBwb3B1cEZvcm1BYm91dC52YWx1ZSA9IHByb2ZpbGVVc2VySW5mby51c2VySm9iO1xyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oeyB1c2VyTmFtZTogcmVzLm5hbWUsIHVzZXJKb2I6IHJlcy5hYm91dCB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICBwcm9maWxlVXNlci51c2VySWQgPSByZXMuX2lkO1xyXG4gIH0pXHJcbiAgLnRoZW4oKCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5nZXRDYXJkTGlzdCgpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uQ2FyZHMgPSBuZXcgU2VjdGlvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGF0YTogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmRJdGVtKTtcclxuICAgICAgICAgICAgICBzZWN0aW9uQ2FyZHMuYWRkQ2FyZHMoY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiLmVsZW1lbnRzXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHNlY3Rpb25DYXJkcy5yZW5kZXJlcigpO1xyXG5cclxuICAgICAgICBjb25zdCBjcmVhdGVDYXJkUG9wVXAgPSBuZXcgUG9wVXBXaXRoRm9ybShcclxuICAgICAgICAgIFwiLnBvcHVwX3R5cGVfY2FyZFwiLFxyXG4gICAgICAgICAgKGZvcm1EYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5hZGRDYXJkKHsgbmFtZTogZm9ybURhdGEudGl0bGUsIGxpbms6IGZvcm1EYXRhW1wiaW1hZ2UtbGlua1wiXSB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobmV3Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShuZXdDYXJkRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVDYXJkUG9wVXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBhZGRDYXJkU3VibWl0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY3JlYXRlQ2FyZFBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgY3JlYXRlQ2FyZFBvcFVwLm9wZW4oKTtcclxuICAgICAgICAgIGFkZFBsYWNlVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuY29uc3QgcHJvZmlsZUltYWdlUG9wdXAgPSBuZXcgUG9wVXBXaXRoRm9ybShcclxuICBcIi5wb3B1cF9pbWFnZV9wcm9maWxlXCIsXHJcbiAgKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGF2YXRhciA9IGRhdGFbXCJpbWFnZS1saW5rXCJdO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZXRVc2VyQXZhdGFyKGF2YXRhcilcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVVc2VyLnNldFVzZXJBdmF0YXIoYXZhdGFyKTtcclxuICAgICAgICBwcm9maWxlSW1hZ2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfSxcclxuICBpbWFnZVN1Ym1pdFxyXG4pO1xyXG5cclxucHJvZmlsZUltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVJbWFnZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbiAgcHJvZmlsZUltYWdlUG9wdXBWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcFVwID0gbmV3IFBvcFVwRGVsZXRlSW1hZ2Uoe1xyXG4gIHBvcFVwU2VsZWN0b3I6IFwiI2RlbGV0ZUNhcmRcIixcclxuICBzdWJtaXRCdXR0b246IGJ0bkRlbGV0ZSxcclxufSk7XHJcblxyXG5kZWxldGVDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKHsgbmFtZSwgbGluayB9KSA9PiB7XHJcbiAgICAgICAgbW9kYWxDYXJkLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICh7IGlkIH0pID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkUG9wVXAub3BlbigpO1xyXG4gICAgICAgIGRlbGV0ZUNhcmRQb3BVcC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5yZW1vdmVDYXJkKGlkKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcFVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuX2RlbGV0ZUJ1dHRvbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBoYW5kbGVMaWtlQWRkOiAoeyBpZCB9KSA9PiB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkTGlrZShpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQuYWRkSGVhcnQoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBoYW5kbGVMaWtlRGVsZXRlOiAoeyBpZCB9KSA9PiB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlTGlrZShpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlSGVhcnQoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1c2VySWQ6IHByb2ZpbGVVc2VyLnVzZXJJZCxcclxuICAgIH0sXHJcbiAgICBcIiNjYXJkVGVtcGxhdGVcIlxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkNhcmQiLCJfcmVmIiwiX3RoaXMiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQWRkIiwiaGFuZGxlTGlrZURlbGV0ZSIsInVzZXJJZCIsIl9jbGFzc0NhbGxDaGVjayIsInJlc0FycmF5IiwiX2xpa2VzQXJyYXkiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2lkIiwibGlrZXMiLCJfY2FyZExpa2VzIiwibGVuZ3RoIiwiX293bmVySWQiLCJvd25lciIsIl91c2VyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQWRkIiwiX2hhbmRsZUxpa2VEZWxldGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9oZWFydEJ1dHRvbiIsIl9oZWFydE51bWJlciIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwia2V5IiwidmFsdWUiLCJjbG9uZU5vZGUiLCJjb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJjbG9zZXN0IiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvbWUiLCJsaWtlIiwiaWQiLCJfdGhpczMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJzZXRBdHRyaWJ1dGUiLCJoYXNVc2VyTGlrZWQiLCJ0b2dnbGUiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlUHJvZmVzc2lvbiIsInBvcHVwRm9ybU5hbWUiLCJwb3B1cEZvcm1BYm91dCIsImVkaXRCdG4iLCJidXR0b25TdWJtaXQiLCJwcm9maWxlSW1hZ2UiLCJwcm9maWxlSW1hZ2VPdmVybGF5IiwiaW1hZ2VGb3JtRWxlbWVudCIsImFkZEJ0biIsImZvcm1FbGVtZW50IiwicGxhY2VGb3JtRWxlbWVudCIsImFkZENhcmRTdWJtaXQiLCJpbWFnZVN1Ym1pdCIsImJ0bkRlbGV0ZSIsInNlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0TGlzdCIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9mb3JtRWxlbWVudCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9zZXRCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiY2xhc3NUb0FkZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiUG9wdXAiLCJwb3BVcFNlbGVjdG9yIiwiX3BvcFVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9jbGlja091dHNpZGUiLCJQb3BVcFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1Ym1pdEJ1dHRvbiIsImNhbGwiLCJfc3VibWl0QnV0dG9uIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImNvbnNvbGUiLCJsb2ciLCJpc0xvYWRpbmciLCJyZW5kZXJMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwiUG9wVXBXaXRoSW1hZ2UiLCJfdGl0bGUiLCJfaW1hZ2UiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl91c2VySWQiLCJfdXNlckF2YXRhciIsImF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibWV0aG9kIiwidXJsIiwiYm9keSIsImZldGNoIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJfbWFrZVJlcXVlc3QiLCJfcmVmMiIsImFib3V0IiwiX3JlZjMiLCJjYXJkSWQiLCJQb3BVcERlbGV0ZUltYWdlIiwiX1BvcFVwIiwiYWN0aW9uIiwiUG9wVXAiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwicHJvZmlsZVBvcFVwVmFsaWRhdG9yIiwiYWRkUGxhY2VWYWxpZGF0aW9uIiwicHJvZmlsZUltYWdlUG9wdXBWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwibW9kYWxDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlZGl0UG9wVXAiLCJoYW5kbGVFZGl0UHJvZmlsZSIsInJlc3BvbnNlIiwiZ2V0VXNlckluZm8iLCJwcm9maWxlVXNlciIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJvcGVuIiwicmVzZXRWYWxpZGF0aW9uIiwicHJvZmlsZVVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImdldENhcmRMaXN0Iiwic2VjdGlvbkNhcmRzIiwiY2FyZEl0ZW0iLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJhZGRDYXJkcyIsImNyZWF0ZUNhcmRQb3BVcCIsImZvcm1EYXRhIiwiYWRkQ2FyZCIsInRpdGxlIiwibmV3Q2FyZCIsIm5ld0NhcmRFbGVtZW50IiwiYWRkSXRlbSIsInByb2ZpbGVJbWFnZVBvcHVwIiwiZGVsZXRlQ2FyZFBvcFVwIiwic2V0U3VibWl0QWN0aW9uIiwicmVtb3ZlQ2FyZCIsIl9kZWxldGVCdXR0b24iLCJhZGRMaWtlIiwidXBkYXRlTGlrZXMiLCJhZGRIZWFydCIsIl9yZWY0IiwicmVtb3ZlTGlrZSIsInJlbW92ZUhlYXJ0IiwiZ2VuZXJhdGVDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==